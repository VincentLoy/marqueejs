var d=Object.defineProperty;var m=(a,e,t)=>e in a?d(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var r=(a,e,t)=>m(a,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();class u{static validate(e){return this.validateSpeed(e.speed),this.validateDirection(e.direction),this.validateGap(e.gap),e.cloneCount!==void 0&&((!Number.isInteger(e.cloneCount)||e.cloneCount<0)&&(console.warn(`MarqueeJS: Requested ${e.cloneCount} clones, but minimum is ${this.MIN_CLONES}. Using ${this.MIN_CLONES} clones instead.`),e.cloneCount=this.MIN_CLONES),e.cloneCount>this.MAX_CLONES&&(console.warn(`MarqueeJS: Requested ${e.cloneCount} clones, but maximum is ${this.MAX_CLONES}. Using ${this.MAX_CLONES} clones instead.`),e.cloneCount=this.MAX_CLONES)),e}static validateSpeed(e){if(e!==void 0&&(typeof e!="number"||e<=0))throw new Error("MarqueeJS: Speed must be a positive number")}static validateDirection(e){const t=["left","right","up","down"];if(e&&!t.includes(e))throw new Error(`MarqueeJS: Direction must be one of: ${t.join(", ")}`)}static validateGap(e){if(e!==void 0&&(typeof e!="number"||e<0))throw new Error("MarqueeJS: Gap must be a non-negative number")}static validateCloneCount(e){if(e!==void 0&&(!Number.isInteger(e)||e<1))throw new Error("MarqueeJS: Clone count must be a positive integer")}}r(u,"MAX_CLONES",50),r(u,"MIN_CLONES",0);class f{constructor(e,t,s){r(this,"element");r(this,"wrapper");r(this,"options");r(this,"animationFrame",null);r(this,"lastTime",0);r(this,"elements",[]);this.element=e,this.wrapper=t,this.options=s,this.setupElements()}setupElements(){var n,o;const e=((n=this.wrapper.parentElement)==null?void 0:n.offsetWidth)||0,t=((o=this.wrapper.parentElement)==null?void 0:o.offsetHeight)||0,s=this.element.offsetWidth+this.options.gap,i=this.element.offsetHeight+this.options.gap;this.elements=Array.from(this.wrapper.children).map((p,c)=>{const h=p;let l=0;switch(this.options.direction){case"left":l=c*s;break;case"right":l=e-(c+1)*s;break;case"up":l=c*i;break;case"down":l=t-(c+1)*i;break}return h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.transform=["left","right"].includes(this.options.direction)?`translateX(${l}px)`:`translateY(${l}px)`,h.style.transition="transform linear",{el:h,position:l}})}startAnimation(){this.lastTime=performance.now();const e=t=>{const s=t-this.lastTime;this.lastTime=t;const i=this.options.speed*s/1e3;this.elements.forEach(n=>{["left","right"].includes(this.options.direction)?this.updateHorizontalPosition(n,i):this.updateVerticalPosition(n,i)}),this.animationFrame=requestAnimationFrame(e)};this.animationFrame=requestAnimationFrame(e)}isPositionAvailable(e,t){const s=this.options.gap,i=["left","right"].includes(this.options.direction);return!this.elements.some(({el:n,position:o})=>{if(n===t)return!1;if(i){const p=n.offsetWidth;return Math.abs(o-e)<p+s}else{const p=n.offsetHeight;return Math.abs(o-e)<p+s}})}updateHorizontalPosition(e,t){var n;const s=((n=this.wrapper.parentElement)==null?void 0:n.offsetWidth)||0,i=e.el.offsetWidth;if(this.options.direction==="left"){if(e.position-=t,e.position+i<0){const o=s;this.isPositionAvailable(o,e.el)&&(e.position=o)}}else if(e.position+=t,e.position>s){const o=-i;this.isPositionAvailable(o,e.el)&&(e.position=o)}e.el.style.transform=`translateX(${e.position}px)`}updateVerticalPosition(e,t){var n;const s=((n=this.wrapper.parentElement)==null?void 0:n.offsetHeight)||0,i=e.el.offsetHeight;if(this.options.direction==="up"){if(e.position-=t,e.position+i<0){const o=s;this.isPositionAvailable(o,e.el)&&(e.position=o)}}else if(e.position+=t,e.position>s){const o=-i;this.isPositionAvailable(o,e.el)&&(e.position=o)}e.el.style.transform=`translateY(${e.position}px)`}stopAnimation(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null),this.lastTime=0}}class v{constructor(e,t,s,i){r(this,"wrapper");r(this,"options");r(this,"handlers");this.wrapper=t,this.options=s,this.handlers=i,this.init()}init(){this.setupHoverEvents(),this.setupTouchEvents(),this.setupVisibilityEvents()}setupHoverEvents(){this.options.pauseOnHover&&(this.wrapper.addEventListener("mouseenter",this.handlers.pause),this.wrapper.addEventListener("mouseleave",this.handlers.resume))}setupTouchEvents(){let e,t;this.wrapper.addEventListener("touchstart",i=>{e=i.touches[0].clientX,t=i.touches[0].clientY,this.handlers.pause()},{passive:!0}),this.wrapper.addEventListener("touchend",()=>{this.handlers.resume()},{passive:!0});const s=i=>{const n=i.touches[0].clientX-e,o=i.touches[0].clientY-t;(Math.abs(n)>Math.abs(o)&&["left","right"].includes(this.options.direction)||Math.abs(o)>Math.abs(n)&&["up","down"].includes(this.options.direction))&&i.preventDefault()};["left","right","up","down"].includes(this.options.direction)?this.wrapper.addEventListener("touchmove",s,{passive:!1}):this.wrapper.addEventListener("touchmove",s,{passive:!0})}setupVisibilityEvents(){document.addEventListener("visibilitychange",()=>{document.hidden?this.handlers.pause():this.handlers.resume()})}destroy(){this.options.pauseOnHover&&(this.wrapper.removeEventListener("mouseenter",this.handlers.pause),this.wrapper.removeEventListener("mouseleave",this.handlers.resume)),this.wrapper.removeEventListener("touchstart",this.handlers.pause,{passive:!0}),this.wrapper.removeEventListener("touchend",this.handlers.resume,{passive:!0}),document.removeEventListener("visibilitychange",this.handlers.pause)}}class g{constructor(e,t={}){r(this,"element");r(this,"options");r(this,"container",null);r(this,"wrapper",null);r(this,"clones",[]);r(this,"isPlaying",!1);r(this,"animationManager",null);r(this,"eventManager",null);r(this,"defaultOptions",{speed:100,direction:"left",pauseOnHover:!0,gap:20,cloneCount:1,separator:" - "});const s=typeof e=="string"?document.querySelector(e):e;if(!s)throw new Error("Invalid element selector");const i=u.validate(t);this.element=s,this.options={...this.defaultOptions,...i},this.init()}init(){this.setupWrapper(),this.cloneElements(),this.wrapper&&(this.animationManager=new f(this.element,this.wrapper,this.options),this.eventManager=new v(this.element,this.wrapper,this.options,{pause:()=>this.pause(),resume:()=>this.play()}),this.play())}setupWrapper(){var t;const e=this.element.offsetHeight;this.container=document.createElement("div"),this.container.style.width="100%",this.container.style.height=`${e}px`,this.container.style.overflow="hidden",this.container.style.position="relative",this.container.classList.add("marquee-container"),this.wrapper=document.createElement("div"),this.wrapper.style.position="relative",this.wrapper.style.width="100%",this.wrapper.style.height="100%",this.wrapper.classList.add("marquee-wrapper"),this.element.style.position="absolute",this.element.style.top="0",this.element.style.left="0",this.element.style.flexShrink="0",this.element.style.height=["up","down"].includes(this.options.direction)?"auto":`${e}px`,["left","right"].includes(this.options.direction)?this.element.style.marginRight=`${this.options.gap}px`:this.element.style.marginBottom=`${this.options.gap}px`,(t=this.element.parentNode)==null||t.insertBefore(this.container,this.element),this.container.appendChild(this.wrapper),this.wrapper.appendChild(this.element)}cloneElements(){var e;if(this.options.cloneCount!==0)for(let t=0;t<this.options.cloneCount;t++){const s=this.element.cloneNode(!0);s.setAttribute("aria-hidden","true"),s.style.flexShrink="0",["left","right"].includes(this.options.direction)?s.style.marginRight=`${this.options.gap}px`:s.style.marginBottom=`${this.options.gap}px`,this.clones.push(s),(e=this.wrapper)==null||e.appendChild(s)}}play(){this.isPlaying||(this.isPlaying=!0,this.startAnimation())}pause(){this.isPlaying&&(this.isPlaying=!1,this.stopAnimation())}startAnimation(){var e;(e=this.animationManager)==null||e.startAnimation()}stopAnimation(){var e;(e=this.animationManager)==null||e.stopAnimation()}destroy(){var e,t,s,i;this.pause(),(e=this.animationManager)==null||e.stopAnimation(),(t=this.eventManager)==null||t.destroy(),this.clones.forEach(n=>n.remove()),(s=this.wrapper)!=null&&s.parentNode&&(this.wrapper.parentNode.insertBefore(this.element,this.wrapper),(i=this.container)==null||i.remove())}}function w(a,e={}){const t=new g(a,e);return{start(){t.play()},stop(){t.pause()},pause(){t.pause()},resume(){t.play()},destroy(){t.destroy()}}}document.addEventListener("DOMContentLoaded",()=>{w(".marquee-demo",{speed:100,direction:"left",cloneCount:10,gap:20})});

{"version":3,"file":"marqueejs.umd.cjs","sources":["../src/core/OptionsValidator.ts","../src/core/AnimationManager.ts","../src/core/EventManager.ts","../src/core/Marquee.ts","../src/index.ts"],"sourcesContent":["import type { MarqueeOptions } from '../types'\n\nexport class OptionsValidator {\n  static readonly MAX_CLONES = 15;\n  static readonly MIN_CLONES = 0;\n\n  static validate(options: MarqueeOptions): MarqueeOptions {\n    this.validateSpeed(options.speed)\n    this.validateDirection(options.direction)\n    this.validateGap(options.gap)\n    \n    // Handle clone count separately to return modified options\n    if (options.cloneCount !== undefined) {\n      if (!Number.isInteger(options.cloneCount) || options.cloneCount < 0) {\n        console.warn(`MarqueeJS: Requested ${options.cloneCount} clones, but minimum is ${this.MIN_CLONES}. Using ${this.MIN_CLONES} clones instead.`)\n        options.cloneCount = this.MIN_CLONES\n      }\n      if (options.cloneCount > this.MAX_CLONES) {\n        console.warn(`MarqueeJS: Requested ${options.cloneCount} clones, but maximum is ${this.MAX_CLONES}. Using ${this.MAX_CLONES} clones instead.`)\n        options.cloneCount = this.MAX_CLONES\n      }\n    }\n\n    // Remove separator for vertical directions\n    if (['up', 'down'].includes(options.direction || '') && options.separator) {\n      console.warn('MarqueeJS: Separator is not supported for vertical directions. Separator will be ignored.')\n      options.separator = ''\n    }\n\n    return options\n  }\n\n  private static validateSpeed(speed: number | undefined): void {\n    if (speed !== undefined && (typeof speed !== 'number' || speed <= 0)) {\n      throw new Error('MarqueeJS: Speed must be a positive number')\n    }\n  }\n\n  private static validateDirection(direction: string | undefined): void {\n    const validDirections = ['left', 'right', 'up', 'down']\n    if (direction && !validDirections.includes(direction)) {\n      throw new Error(`MarqueeJS: Direction must be one of: ${validDirections.join(', ')}`)\n    }\n  }\n\n  private static validateGap(gap: number | undefined): void {\n    if (gap !== undefined && (typeof gap !== 'number' || gap < 0)) {\n      throw new Error('MarqueeJS: Gap must be a non-negative number')\n    }\n  }\n}\n","import type { MarqueeOptions } from '../types'\n\nexport class AnimationManager {\n  private element: HTMLElement\n  private wrapper: HTMLElement\n  private options: Required<MarqueeOptions>\n  private animationFrame: number | null = null\n  private lastTime: number = 0\n  private elements: Array<{ el: HTMLElement; position: number }> = []\n\n  constructor(element: HTMLElement, wrapper: HTMLElement, options: Required<MarqueeOptions>) {\n    this.element = element\n    this.wrapper = wrapper\n    this.options = options\n    this.setupElements()\n  }\n\n  private setupElements(): void {\n    const containerWidth = this.wrapper.parentElement?.offsetWidth || 0\n    const containerHeight = this.wrapper.parentElement?.offsetHeight || 0\n    const elementWidth = this.element.offsetWidth + this.options.gap\n    const elementHeight = this.element.offsetHeight + this.options.gap\n\n    // Convert wrapper children to array including original element\n    this.elements = Array.from(this.wrapper.children).map((el, index) => {\n      const element = el as HTMLElement\n      let position = 0\n\n      // Calculate initial position based on direction and index\n      switch (this.options.direction) {\n        case 'left':\n          position = index * elementWidth\n          break\n        case 'right':\n          position = containerWidth - ((index + 1) * elementWidth)\n          break\n        case 'up':\n          position = index * elementHeight\n          break\n        case 'down':\n          position = containerHeight - ((index + 1) * elementHeight)\n          break\n      }\n\n      // Set initial styles\n      element.style.position = 'absolute'\n      element.style.top = '0'\n      element.style.left = '0'\n      element.style.transform = ['left', 'right'].includes(this.options.direction)\n        ? `translateX(${position}px)`\n        : `translateY(${position}px)`\n      element.style.transition = 'transform linear'\n\n      return { el: element, position }\n    })\n  }\n\n  public startAnimation(): void {\n    this.lastTime = performance.now()\n    \n    const animate = (currentTime: number) => {\n      const deltaTime = currentTime - this.lastTime\n      this.lastTime = currentTime\n      const movement = (this.options.speed * deltaTime) / 1000\n\n      // Update each element's position independently\n      this.elements.forEach((item) => {\n        if (['left', 'right'].includes(this.options.direction)) {\n          this.updateHorizontalPosition(item, movement)\n        } else {\n          this.updateVerticalPosition(item, movement)\n        }\n      })\n\n      this.animationFrame = requestAnimationFrame(animate)\n    }\n\n    this.animationFrame = requestAnimationFrame(animate)\n  }\n\n  private isPositionAvailable(newPosition: number, currentElement: HTMLElement): boolean {\n    const threshold = this.options.gap\n    const isHorizontal = ['left', 'right'].includes(this.options.direction)\n    \n    return !this.elements.some(({ el, position }) => {\n      if (el === currentElement) return false\n      \n      if (isHorizontal) {\n        const elementWidth = el.offsetWidth\n        return Math.abs(position - newPosition) < (elementWidth + threshold)\n      } else {\n        const elementHeight = el.offsetHeight\n        return Math.abs(position - newPosition) < (elementHeight + threshold)\n      }\n    })\n  }\n\n  private updateHorizontalPosition(item: { el: HTMLElement; position: number }, movement: number): void {\n    const containerWidth = this.wrapper.parentElement?.offsetWidth || 0\n    const elementWidth = item.el.offsetWidth\n\n    if (this.options.direction === 'left') {\n      item.position -= movement\n      \n      if (item.position + elementWidth < 0) {\n        const newPosition = containerWidth\n        // Only reset if there's space available\n        if (this.isPositionAvailable(newPosition, item.el)) {\n          item.position = newPosition\n        }\n      }\n    } else {\n      item.position += movement\n      \n      if (item.position > containerWidth) {\n        const newPosition = -elementWidth\n        if (this.isPositionAvailable(newPosition, item.el)) {\n          item.position = newPosition\n        }\n      }\n    }\n\n    item.el.style.transform = `translateX(${item.position}px)`\n  }\n\n  private updateVerticalPosition(item: { el: HTMLElement; position: number }, movement: number): void {\n    const containerHeight = this.wrapper.parentElement?.offsetHeight || 0\n    const elementHeight = item.el.offsetHeight\n\n    if (this.options.direction === 'up') {\n      item.position -= movement\n      if (item.position + elementHeight < 0) {\n        const newPosition = containerHeight\n        if (this.isPositionAvailable(newPosition, item.el)) {\n          item.position = newPosition\n        }\n      }\n    } else {\n      item.position += movement\n      if (item.position > containerHeight) {\n        const newPosition = -elementHeight\n        if (this.isPositionAvailable(newPosition, item.el)) {\n          item.position = newPosition\n        }\n      }\n    }\n\n    item.el.style.transform = `translateY(${item.position}px)`\n  }\n\n  public stopAnimation(): void {\n    if (this.animationFrame) {\n      cancelAnimationFrame(this.animationFrame)\n      this.animationFrame = null\n    }\n    this.lastTime = 0\n  }\n\n  public recalculatePositions(): void {\n    // Stop current animation\n    this.stopAnimation()\n    \n    // Reset and reinitialize positions\n    this.setupElements()\n    \n    // Restart animation if it was running\n    this.startAnimation()\n  }\n}\n","import type { MarqueeOptions } from '../types'\n\nexport class EventManager {\n  private wrapper: HTMLElement\n  private options: Required<MarqueeOptions>\n  private handlers: {\n    pause: () => void\n    resume: () => void\n  }\n\n  constructor(\n    _element: HTMLElement, \n    wrapper: HTMLElement, \n    options: Required<MarqueeOptions>,\n    handlers: { pause: () => void; resume: () => void }\n  ) {\n    this.wrapper = wrapper\n    this.options = options\n    this.handlers = handlers\n    this.init()\n  }\n\n  private init(): void {\n    this.setupHoverEvents()\n    this.setupTouchEvents()\n    this.setupVisibilityEvents()\n  }\n\n  private setupHoverEvents(): void {\n    if (this.options.pauseOnHover) {\n      this.wrapper.addEventListener('mouseenter', this.handlers.pause)\n      this.wrapper.addEventListener('mouseleave', this.handlers.resume)\n    }\n  }\n\n  private setupTouchEvents(): void {\n    let touchStartX: number\n    let touchStartY: number\n\n    // Add passive touch start listener\n    this.wrapper.addEventListener('touchstart', (e: TouchEvent) => {\n      touchStartX = e.touches[0].clientX\n      touchStartY = e.touches[0].clientY\n      this.handlers.pause()\n    }, { passive: true })\n\n    // Add passive touch end listener\n    this.wrapper.addEventListener('touchend', () => {\n      this.handlers.resume()\n    }, { passive: true })\n\n    // Separate touch move handler that can prevent default\n    const handleTouchMove = (e: TouchEvent) => {\n      const deltaX = e.touches[0].clientX - touchStartX\n      const deltaY = e.touches[0].clientY - touchStartY\n      \n      if (Math.abs(deltaX) > Math.abs(deltaY) && \n         ['left', 'right'].includes(this.options.direction)) {\n        e.preventDefault()\n      } else if (Math.abs(deltaY) > Math.abs(deltaX) && \n                ['up', 'down'].includes(this.options.direction)) {\n        e.preventDefault()\n      }\n    }\n\n    // Add non-passive touch move listener only when needed\n    if (['left', 'right', 'up', 'down'].includes(this.options.direction)) {\n      this.wrapper.addEventListener('touchmove', handleTouchMove, { passive: false })\n    } else {\n      this.wrapper.addEventListener('touchmove', handleTouchMove, { passive: true })\n    }\n  }\n\n  private setupVisibilityEvents(): void {\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden) {\n        this.handlers.pause()\n      } else {\n        this.handlers.resume()\n      }\n    })\n  }\n\n  public destroy(): void {\n    if (this.options.pauseOnHover) {\n      this.wrapper.removeEventListener('mouseenter', this.handlers.pause)\n      this.wrapper.removeEventListener('mouseleave', this.handlers.resume)\n    }\n    \n    this.wrapper.removeEventListener('touchstart', this.handlers.pause, { passive: true })\n    this.wrapper.removeEventListener('touchend', this.handlers.resume, { passive: true })\n    document.removeEventListener('visibilitychange', this.handlers.pause)\n  }\n}\n","import type { MarqueeOptions } from '../types';\nimport { OptionsValidator } from './OptionsValidator';\nimport { AnimationManager } from './AnimationManager';\nimport { EventManager } from './EventManager';\n\nexport class Marquee {\n  private element: HTMLElement;\n  private options: Required<MarqueeOptions>;\n  private container: HTMLElement | null = null;\n  private wrapper: HTMLElement | null = null;\n  private clones: HTMLElement[] = [];\n  private isPlaying: boolean = false;\n  private animationManager: AnimationManager | null = null;\n  private eventManager: EventManager | null = null;\n  private separatorClasses: WeakMap<HTMLElement, string> = new WeakMap();\n\n  private defaultOptions: Required<MarqueeOptions> = {\n    speed: 100,\n    direction: 'left',\n    pauseOnHover: false,\n    gap: 20,\n    cloneCount: 4,\n    separator: ''\n  };\n\n  constructor(selector: string | HTMLElement, options: MarqueeOptions = {}) {\n    const element = typeof selector === 'string' \n      ? document.querySelector(selector) \n      : selector;\n\n    if (!element) {\n      throw new Error('Invalid element selector');\n    }\n\n    const validatedOptions = OptionsValidator.validate(options);\n    this.element = element as HTMLElement;\n    this.options = { ...this.defaultOptions, ...validatedOptions };\n    this.init();\n  }\n\n  private init(): void {\n    this.setupWrapper();\n    this.cloneElements();\n    if (this.wrapper) {\n      this.animationManager = new AnimationManager(this.element, this.wrapper, this.options);\n      this.eventManager = new EventManager(\n        this.element,\n        this.wrapper,\n        this.options,\n        {\n          pause: () => this.pause(),\n          resume: () => this.play()\n        }\n      );\n      // Start animation immediately\n      this.play();\n    }\n  }\n\n  private setupWrapper(): void {\n    const originalHeight = this.element.offsetHeight\n\n    // Create outer container\n    this.container = document.createElement('div');\n    this.container.style.width = '100%';\n    this.container.style.height = `${originalHeight}px`;\n    this.container.style.overflow = 'hidden';\n    this.container.style.position = 'relative';\n    this.container.classList.add('marquee-container');\n    \n    // Create inner wrapper\n    this.wrapper = document.createElement('div');\n    this.wrapper.style.position = 'relative'; // Changed from absolute\n    this.wrapper.style.width = '100%';\n    this.wrapper.style.height = '100%';\n    this.wrapper.classList.add('marquee-wrapper');\n    \n    // Setup element styles\n    this.element.style.position = 'absolute';\n    this.element.style.top = '0';\n    this.element.style.left = '0';\n    this.element.style.flexShrink = '0';\n    this.element.style.height = ['up', 'down'].includes(this.options.direction) ? 'auto' : `${originalHeight}px`;\n    if (['left', 'right'].includes(this.options.direction)) {\n      this.element.style.marginRight = `${this.options.gap}px`;\n    } else {\n      this.element.style.marginBottom = `${this.options.gap}px`;\n    }\n    \n    // Insert into DOM\n    this.element.parentNode?.insertBefore(this.container, this.element);\n    this.container.appendChild(this.wrapper);\n    this.wrapper.appendChild(this.element);\n\n    // Add separator to original element\n    this.addSeparatorStyle(this.element);\n  }\n\n  private cloneElements(): void {\n    if (this.options.cloneCount === 0) return;\n    for (let i = 0; i < this.options.cloneCount; i++) {\n      const clone = this.element.cloneNode(true) as HTMLElement;\n      clone.setAttribute('aria-hidden', 'true');\n      clone.style.flexShrink = '0';\n      if (['left', 'right'].includes(this.options.direction)) {\n        clone.style.marginRight = `${this.options.gap}px`;\n      } else {\n        clone.style.marginBottom = `${this.options.gap}px`;\n      }\n      // Add separator (except for last clone)\n      this.addSeparatorStyle(clone, i === this.options.cloneCount - 1);\n      this.clones.push(clone);\n      this.wrapper?.appendChild(clone);\n    }\n  }\n\n  public play(): void {\n    if (this.isPlaying) return;\n    this.isPlaying = true;\n    this.startAnimation();\n  }\n\n  public pause(): void {\n    if (!this.isPlaying) return;\n    this.isPlaying = false;\n    this.stopAnimation();\n  }\n\n  private startAnimation(): void {\n    this.animationManager?.startAnimation();\n  }\n\n  private stopAnimation(): void {\n    this.animationManager?.stopAnimation();\n  }\n\n  public destroy(): void {\n    this.pause();\n    this.animationManager?.stopAnimation();\n    this.eventManager?.destroy();\n    this.clones.forEach(clone => clone.remove());\n    if (this.wrapper?.parentNode) {\n      this.wrapper.parentNode.insertBefore(this.element, this.wrapper);\n      this.container?.remove();\n    }\n    // Remove separator styles\n    document.querySelectorAll('style').forEach(style => {\n      if (style.textContent?.includes('marquee-item-')) {\n        style.remove();\n      }\n    });\n    // Clean up separator styles using tracked classes\n    this.clones.forEach(clone => {\n      const className = this.separatorClasses.get(clone);\n      if (className) {\n        document.querySelector(`style[data-for=\"${className}\"]`)?.remove();\n      }\n    });\n    // Clean up all separator styles\n    [this.element, ...this.clones].forEach(el => this.cleanupSeparatorStyle(el));\n  }\n\n  public updateContent(content: string): void {\n    // Update content first\n    this.element.innerHTML = content;\n    this.clones.forEach(clone => {\n      clone.innerHTML = content;\n    });\n\n    // Then handle layout updates\n    if (this.wrapper && this.animationManager) {\n      // ...existing margin updates...\n      this.animationManager.recalculatePositions();\n    }\n\n    // Finally update separators\n    this.addSeparatorStyle(this.element);\n    this.clones.forEach((clone, index) => {\n      this.addSeparatorStyle(clone, index === this.clones.length - 1);\n    });\n  }\n\n  private cleanupSeparatorStyle(element: HTMLElement): void {\n    // Clean up any existing separator classes\n    Array.from(element.classList)\n      .filter(className => className.startsWith('marquee-item-'))\n      .forEach(className => {\n        element.classList.remove(className);\n        document.querySelector(`style[data-for=\"${className}\"]`)?.remove();\n      });\n  }\n\n  private addSeparatorStyle(element: HTMLElement, isLast: boolean = false): void {\n    if (\n      this.options.gap === 0 || this.options.cloneCount === 0 ||\n      !this.options.separator || ['up', 'down'].includes(this.options.direction)\n    ) {\n      this.cleanupSeparatorStyle(element);\n      return;\n    }\n\n    // Clean up before adding new style\n    this.cleanupSeparatorStyle(element);\n\n    const className = `marquee-item-${Math.random().toString(36).substr(2, 9)}`;\n    const style = document.createElement('style');\n    \n    element.classList.add('marquee-item');\n    element.classList.add(className);\n    style.setAttribute('data-for', className);\n    style.textContent = `\n      .${className}::before {\n        content: '${this.options.separator}';\n        position: absolute;\n        left: -${this.options.gap / 2}px;\n        transform: translateX(-50%);\n        white-space: pre;\n      }\n    `;\n    \n    document.head.appendChild(style);\n  }\n}","import { Marquee } from './core/Marquee'\nimport type { MarqueeOptions, MarqueeInstance } from './types'\n\nexport function marqueejs(selector: string, options: MarqueeOptions = {}): MarqueeInstance {\n  const instance = new Marquee(selector, options)\n  \n  return {\n    start() { instance.play() },\n    stop() { instance.pause() },\n    pause() { instance.pause() },\n    resume() { instance.play() },\n    destroy() { instance.destroy() },\n    updateContent(content: string) { instance.updateContent(content) }\n  }\n}\n\nexport type { MarqueeOptions, MarqueeInstance }\n"],"names":["OptionsValidator","options","speed","direction","validDirections","gap","__publicField","AnimationManager","element","wrapper","containerWidth","_a","containerHeight","_b","elementWidth","elementHeight","el","index","position","animate","currentTime","deltaTime","movement","item","newPosition","currentElement","threshold","isHorizontal","EventManager","_element","handlers","touchStartX","touchStartY","e","handleTouchMove","deltaX","deltaY","Marquee","selector","validatedOptions","originalHeight","i","clone","_c","_d","style","className","content","isLast","marqueejs","instance"],"mappings":"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"}
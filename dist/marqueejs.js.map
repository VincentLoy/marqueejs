{"version":3,"file":"marqueejs.js","sources":["../src/core/OptionsValidator.ts","../src/core/AnimationManager.ts","../src/core/EventManager.ts","../src/core/Marquee.ts","../src/index.ts"],"sourcesContent":["import type { MarqueeOptions } from '../types'\n\nexport class OptionsValidator {\n  static validate(options: MarqueeOptions): void {\n    this.validateSpeed(options.speed)\n    this.validateDirection(options.direction)\n    this.validateGap(options.gap)\n    this.validateCloneCount(options.cloneCount)\n    this.validateEasing(options.easing)\n  }\n\n  private static validateSpeed(speed: number | undefined): void {\n    if (speed !== undefined && (typeof speed !== 'number' || speed <= 0)) {\n      throw new Error('Speed must be a positive number')\n    }\n  }\n\n  private static validateDirection(direction: string | undefined): void {\n    const validDirections = ['left', 'right', 'up', 'down']\n    if (direction && !validDirections.includes(direction)) {\n      throw new Error(`Direction must be one of: ${validDirections.join(', ')}`)\n    }\n  }\n\n  private static validateGap(gap: number | undefined): void {\n    if (gap !== undefined && (typeof gap !== 'number' || gap < 0)) {\n      throw new Error('Gap must be a non-negative number')\n    }\n  }\n\n  private static validateCloneCount(count: number | undefined): void {\n    if (count !== undefined && (!Number.isInteger(count) || count < 1)) {\n      throw new Error('Clone count must be a positive integer')\n    }\n  }\n\n  private static validateEasing(easing: string | undefined): void {\n    const validEasings = ['linear', 'ease', 'ease-in', 'ease-out', 'ease-in-out']\n    if (easing && !validEasings.includes(easing)) {\n      throw new Error(`Easing must be one of: ${validEasings.join(', ')}`)\n    }\n  }\n}\n","import type { MarqueeOptions } from '../types'\n\nexport class AnimationManager {\n  private element: HTMLElement\n  private wrapper: HTMLElement\n  private options: Required<MarqueeOptions>\n  private animationFrame: number | null = null\n  private lastTime: number = 0\n  private elements: Array<{ el: HTMLElement; position: number }> = []\n\n  constructor(element: HTMLElement, wrapper: HTMLElement, options: Required<MarqueeOptions>) {\n    this.element = element\n    this.wrapper = wrapper\n    this.options = options\n    this.setupElements()\n  }\n\n  private setupElements(): void {\n    const containerWidth = this.wrapper.parentElement?.offsetWidth || 0\n    const containerHeight = this.wrapper.parentElement?.offsetHeight || 0\n    const elementWidth = this.element.offsetWidth + this.options.gap\n    const elementHeight = this.element.offsetHeight + this.options.gap\n\n    // Convert wrapper children to array including original element\n    this.elements = Array.from(this.wrapper.children).map((el, index) => {\n      const element = el as HTMLElement\n      let position = 0\n\n      // Calculate initial position based on direction and index\n      switch (this.options.direction) {\n        case 'left':\n          position = index * elementWidth\n          break\n        case 'right':\n          position = containerWidth - ((index + 1) * elementWidth)\n          break\n        case 'up':\n          position = index * elementHeight\n          break\n        case 'down':\n          position = containerHeight - ((index + 1) * elementHeight)\n          break\n      }\n\n      // Set initial styles\n      element.style.position = 'absolute'\n      element.style.top = '0'\n      element.style.left = '0'\n      element.style.transform = ['left', 'right'].includes(this.options.direction)\n        ? `translateX(${position}px)`\n        : `translateY(${position}px)`\n      element.style.transition = 'transform linear'\n\n      return { el: element, position }\n    })\n  }\n\n  public startAnimation(): void {\n    this.lastTime = performance.now()\n    \n    const animate = (currentTime: number) => {\n      const deltaTime = currentTime - this.lastTime\n      this.lastTime = currentTime\n      const movement = (this.options.speed * deltaTime) / 1000\n\n      // Update each element's position independently\n      this.elements.forEach((item) => {\n        if (['left', 'right'].includes(this.options.direction)) {\n          this.updateHorizontalPosition(item, movement)\n        } else {\n          this.updateVerticalPosition(item, movement)\n        }\n      })\n\n      this.animationFrame = requestAnimationFrame(animate)\n    }\n\n    this.animationFrame = requestAnimationFrame(animate)\n  }\n\n  private isPositionAvailable(newPosition: number, currentElement: HTMLElement): boolean {\n    const threshold = this.options.gap\n    const isHorizontal = ['left', 'right'].includes(this.options.direction)\n    \n    return !this.elements.some(({ el, position }) => {\n      if (el === currentElement) return false\n      \n      if (isHorizontal) {\n        const elementWidth = el.offsetWidth\n        return Math.abs(position - newPosition) < (elementWidth + threshold)\n      } else {\n        const elementHeight = el.offsetHeight\n        return Math.abs(position - newPosition) < (elementHeight + threshold)\n      }\n    })\n  }\n\n  private updateHorizontalPosition(item: { el: HTMLElement; position: number }, movement: number): void {\n    const containerWidth = this.wrapper.parentElement?.offsetWidth || 0\n    const elementWidth = item.el.offsetWidth\n\n    if (this.options.direction === 'left') {\n      item.position -= movement\n      \n      if (item.position + elementWidth < 0) {\n        const newPosition = containerWidth\n        // Only reset if there's space available\n        if (this.isPositionAvailable(newPosition, item.el)) {\n          item.position = newPosition\n        }\n      }\n    } else {\n      item.position += movement\n      \n      if (item.position > containerWidth) {\n        const newPosition = -elementWidth\n        if (this.isPositionAvailable(newPosition, item.el)) {\n          item.position = newPosition\n        }\n      }\n    }\n\n    item.el.style.transform = `translateX(${item.position}px)`\n  }\n\n  private updateVerticalPosition(item: { el: HTMLElement; position: number }, movement: number): void {\n    const containerHeight = this.wrapper.parentElement?.offsetHeight || 0\n    const elementHeight = item.el.offsetHeight\n\n    if (this.options.direction === 'up') {\n      item.position -= movement\n      if (item.position + elementHeight < 0) {\n        const newPosition = containerHeight\n        if (this.isPositionAvailable(newPosition, item.el)) {\n          item.position = newPosition\n        }\n      }\n    } else {\n      item.position += movement\n      if (item.position > containerHeight) {\n        const newPosition = -elementHeight\n        if (this.isPositionAvailable(newPosition, item.el)) {\n          item.position = newPosition\n        }\n      }\n    }\n\n    item.el.style.transform = `translateY(${item.position}px)`\n  }\n\n  public stopAnimation(): void {\n    if (this.animationFrame) {\n      cancelAnimationFrame(this.animationFrame)\n      this.animationFrame = null\n    }\n    this.lastTime = 0\n  }\n}\n","import type { MarqueeOptions } from '../types'\n\nexport class EventManager {\n  private wrapper: HTMLElement\n  private options: Required<MarqueeOptions>\n  private handlers: {\n    pause: () => void\n    resume: () => void\n  }\n\n  constructor(\n    _element: HTMLElement, \n    wrapper: HTMLElement, \n    options: Required<MarqueeOptions>,\n    handlers: { pause: () => void; resume: () => void }\n  ) {\n    this.wrapper = wrapper\n    this.options = options\n    this.handlers = handlers\n    this.init()\n  }\n\n  private init(): void {\n    this.setupHoverEvents()\n    this.setupTouchEvents()\n    this.setupVisibilityEvents()\n  }\n\n  private setupHoverEvents(): void {\n    if (this.options.pauseOnHover) {\n      this.wrapper.addEventListener('mouseenter', this.handlers.pause)\n      this.wrapper.addEventListener('mouseleave', this.handlers.resume)\n    }\n  }\n\n  private setupTouchEvents(): void {\n    let touchStartX: number\n    let touchStartY: number\n\n    // Add passive touch start listener\n    this.wrapper.addEventListener('touchstart', (e: TouchEvent) => {\n      touchStartX = e.touches[0].clientX\n      touchStartY = e.touches[0].clientY\n      this.handlers.pause()\n    }, { passive: true })\n\n    // Add passive touch end listener\n    this.wrapper.addEventListener('touchend', () => {\n      this.handlers.resume()\n    }, { passive: true })\n\n    // Separate touch move handler that can prevent default\n    const handleTouchMove = (e: TouchEvent) => {\n      const deltaX = e.touches[0].clientX - touchStartX\n      const deltaY = e.touches[0].clientY - touchStartY\n      \n      if (Math.abs(deltaX) > Math.abs(deltaY) && \n         ['left', 'right'].includes(this.options.direction)) {\n        e.preventDefault()\n      } else if (Math.abs(deltaY) > Math.abs(deltaX) && \n                ['up', 'down'].includes(this.options.direction)) {\n        e.preventDefault()\n      }\n    }\n\n    // Add non-passive touch move listener only when needed\n    if (['left', 'right', 'up', 'down'].includes(this.options.direction)) {\n      this.wrapper.addEventListener('touchmove', handleTouchMove, { passive: false })\n    } else {\n      this.wrapper.addEventListener('touchmove', handleTouchMove, { passive: true })\n    }\n  }\n\n  private setupVisibilityEvents(): void {\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden) {\n        this.handlers.pause()\n      } else {\n        this.handlers.resume()\n      }\n    })\n  }\n\n  public destroy(): void {\n    if (this.options.pauseOnHover) {\n      this.wrapper.removeEventListener('mouseenter', this.handlers.pause)\n      this.wrapper.removeEventListener('mouseleave', this.handlers.resume)\n    }\n    \n    this.wrapper.removeEventListener('touchstart', this.handlers.pause, { passive: true })\n    this.wrapper.removeEventListener('touchend', this.handlers.resume, { passive: true })\n    document.removeEventListener('visibilitychange', this.handlers.pause)\n  }\n}\n","import type { MarqueeOptions } from '../types';\nimport { OptionsValidator } from './OptionsValidator';\nimport { AnimationManager } from './AnimationManager';\nimport { EventManager } from './EventManager';\n\nexport class Marquee {\n  private element: HTMLElement;\n  private options: Required<MarqueeOptions>;\n  private container: HTMLElement | null = null;\n  private wrapper: HTMLElement | null = null;\n  private clones: HTMLElement[] = [];\n  private isPlaying: boolean = false;\n  private animationManager: AnimationManager | null = null;\n  private eventManager: EventManager | null = null;\n\n  private defaultOptions: Required<MarqueeOptions> = {\n    speed: 100,\n    direction: 'left',\n    pauseOnHover: true,\n    gap: 20,\n    easing: 'linear',\n    cloneCount: 1,\n    separator: ' - '\n  };\n\n  constructor(selector: string | HTMLElement, options: MarqueeOptions = {}) {\n    const element = typeof selector === 'string' \n      ? document.querySelector(selector) \n      : selector;\n\n    if (!element) {\n      throw new Error('Invalid element selector');\n    }\n\n    OptionsValidator.validate(options);\n    this.element = element as HTMLElement;\n    this.options = { ...this.defaultOptions, ...options };\n    this.init();\n  }\n\n  private init(): void {\n    this.setupWrapper();\n    this.cloneElements();\n    if (this.wrapper) {\n      this.animationManager = new AnimationManager(this.element, this.wrapper, this.options);\n      this.eventManager = new EventManager(\n        this.element,\n        this.wrapper,\n        this.options,\n        {\n          pause: () => this.pause(),\n          resume: () => this.play()\n        }\n      );\n      // Start animation immediately\n      this.play();\n    }\n  }\n\n  private setupWrapper(): void {\n    const originalHeight = this.element.offsetHeight\n\n    // Create outer container\n    this.container = document.createElement('div');\n    this.container.style.width = '100%';\n    this.container.style.height = `${originalHeight}px`;\n    this.container.style.overflow = 'hidden';\n    this.container.style.position = 'relative';\n    this.container.classList.add('marquee-container');\n    \n    // Create inner wrapper\n    this.wrapper = document.createElement('div');\n    this.wrapper.style.position = 'relative'; // Changed from absolute\n    this.wrapper.style.width = '100%';\n    this.wrapper.style.height = '100%';\n    this.wrapper.classList.add('marquee-wrapper');\n    \n    // Setup element styles\n    this.element.style.position = 'absolute';\n    this.element.style.top = '0';\n    this.element.style.left = '0';\n    this.element.style.flexShrink = '0';\n    this.element.style.height = ['up', 'down'].includes(this.options.direction) ? 'auto' : `${originalHeight}px`;\n    if (['left', 'right'].includes(this.options.direction)) {\n      this.element.style.marginRight = `${this.options.gap}px`;\n    } else {\n      this.element.style.marginBottom = `${this.options.gap}px`;\n    }\n    \n    // Insert into DOM\n    this.element.parentNode?.insertBefore(this.container, this.element);\n    this.container.appendChild(this.wrapper);\n    this.wrapper.appendChild(this.element);\n  }\n\n  private cloneElements(): void {\n    if (this.options.cloneCount === 0) return;\n    for (let i = 0; i < this.options.cloneCount; i++) {\n      const clone = this.element.cloneNode(true) as HTMLElement;\n      clone.setAttribute('aria-hidden', 'true');\n      clone.style.flexShrink = '0';\n      if (['left', 'right'].includes(this.options.direction)) {\n        clone.style.marginRight = `${this.options.gap}px`;\n      } else {\n        clone.style.marginBottom = `${this.options.gap}px`;\n      }\n      this.clones.push(clone);\n      this.wrapper?.appendChild(clone);\n    }\n  }\n\n  public play(): void {\n    if (this.isPlaying) return;\n    this.isPlaying = true;\n    this.startAnimation();\n  }\n\n  public pause(): void {\n    if (!this.isPlaying) return;\n    this.isPlaying = false;\n    this.stopAnimation();\n  }\n\n  private startAnimation(): void {\n    this.animationManager?.startAnimation();\n  }\n\n  private stopAnimation(): void {\n    this.animationManager?.stopAnimation();\n  }\n\n  public destroy(): void {\n    this.pause();\n    this.animationManager?.stopAnimation();\n    this.eventManager?.destroy();\n    this.clones.forEach(clone => clone.remove());\n    if (this.wrapper?.parentNode) {\n      this.wrapper.parentNode.insertBefore(this.element, this.wrapper);\n      this.container?.remove();\n    }\n  }\n}","import { Marquee } from './core/Marquee'\nimport type { MarqueeOptions, MarqueeInstance } from './types'\n\nexport function marqueejs(selector: string, options: MarqueeOptions = {}): MarqueeInstance {\n  const instance = new Marquee(selector, options)\n  \n  return {\n    start() { instance.play() },\n    stop() { instance.pause() },\n    pause() { instance.pause() },\n    resume() { instance.play() },\n    destroy() { instance.destroy() }\n  }\n}\n\nexport type { MarqueeOptions, MarqueeInstance }\n"],"names":["OptionsValidator","options","speed","direction","validDirections","gap","count","easing","validEasings","AnimationManager","element","wrapper","__publicField","_a","_b","containerWidth","containerHeight","elementWidth","elementHeight","el","index","position","animate","currentTime","deltaTime","movement","item","newPosition","currentElement","threshold","isHorizontal","EventManager","_element","handlers","touchStartX","touchStartY","e","handleTouchMove","deltaX","deltaY","Marquee","selector","originalHeight","i","clone","_c","_d","marqueejs","instance"],"mappings":"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"}